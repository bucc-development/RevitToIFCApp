@inject ISnackbar Snackbar

<MudStack Style="width: 100%">
    <MudFileUpload T="IReadOnlyList<IBrowserFile>"
                      AppendMultipleFiles
                    OnFilesChanged="OnInputFileChanged"
                    Hidden="@false"
                    InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20"
                    InputStyle="opacity:0"
                    @ondragenter="@SetDragClass"
                    @ondragleave="@ClearDragClass"
                    @ondragend="@ClearDragClass">
        <ButtonTemplate>

            <MudToolBar DisableGutters="true"
                        Class="relative d-flex justify-end gap-4 z-30">
                <MudButton HtmlTag="label"
                           Color="Color.Primary"
                           for="@context.Id"
                           Variant="Variant.Filled">
                    Open file picker
                </MudButton>
                <MudButton OnClick="@AddFile"
                           Color="Color.Primary"
                           Disabled="@(!_fileNames.Any())"
                           Variant="Variant.Filled">
                    Upload
                </MudButton>
                <MudButton OnClick="@Clear"
                           Color="Color.Error"
                           Disabled="@(!_fileNames.Any())"
                           Variant="Variant.Filled">
                    Clear
                </MudButton>
            </MudToolBar>
        </ButtonTemplate>
         <SelectedTemplate>
             <MudPaper Height="300px"
                       Outlined="true"
                       Class="@_dragClass">
                 <MudText Typo="Typo.h6">
                     Drag and drop files here or click
                 </MudText>
             </MudPaper>
         </SelectedTemplate>
    </MudFileUpload>

     <div class="d-flex flex-column align-stretch" Width="100%">
         @foreach (var file in _fileNames)
        {
            <div class="d-flex flex-row justify-space-between align-center mud-elevation-1 rounded white pa-2 my-2">
                <MudText Typo="Typo.body1" Class="flex-grow-1">
                    @file
                </MudText>
                <MudIconButton Icon="@Icons.Material.Filled.CloudUpload"
                               aria-label="add" Color="Color.Primary"
                               OnClick="@AddFile">
                </MudIconButton>
                <MudIconButton
                    Icon="@Icons.Material.Filled.Delete"
                    aria-label="delete" Color="Color.Primary"
                    OnClick="(() => RemoveFile(file))">
                </MudIconButton>
            </div>
        }
    </div>

</MudStack>